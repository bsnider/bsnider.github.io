<!DOCTYPE html>
<html>

<head>
    <title>MultMaps</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
</head>

<body>
    <div id="map0" style="width: 600px; height: 400px"></div>
    </br>
    <div id="map1" style="width: 600px; height: 400px"></div>
    </br>
    <div id="map2" style="width: 600px; height: 400px"></div>
    <!--<div id="map3" style="width: 200px; height: 200px"></div>
    <div id="map4" style="width: 200px; height: 200px"></div>
    <div id="map5" style="width: 200px; height: 200px"></div> -->

    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>

    <script>
    var mapCount = 2;
    var mapArray = [];
    var handle;

    createMaps();
    setListeners();

    function createMaps() {
        console.log(">>>> create maps");
        for (var i = 0; i < mapCount; i++) {
            mapArray[i] = L.map('map' + i).setView([51.505, -0.09], 13);

            L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
                maxZoom: 18,
                id: 'examples.map-i875mjb7'
            }).addTo(mapArray[i]);
        }
    }


    function setListeners() {
            console.log(">>>>>>>>>>>>>>>>>> set listeners");

            function onMapMove(e) {
                var clickedMap = e.target._container.id;
                console.log(clickedMap);
                //var 1 = clickedMap.slice(3, 4);
                var newZoom = mapArray[1].getZoom();
                var newCenter = mapArray[1].getCenter();
                /*            for (var i = 0; i < mapCount; i++) {
                                mapArray[i].off('move', onMapMove);
                                if (i != 1) {
                                    console.log("move" + 1);
                */
                mapArray[0].setView(newCenter, newZoom);
            }
            mapArray[1].on('move', onMapMove);
        }
        /*            for (var i = 0; i < mapCount; i++) {
                        mapArray[i].on('move', onMapMove);
                    }*/





    //for (var i = 0; i < mapCount; i++) {

    //}
    </script>
</body>

</html>
